<html>
	<head>
		<script src="http://127.0.0.1:8000/socket.io/socket.io.js"></script>
	</head>

	<body>
		<canvas id="canvas" width="200" height="200"></canvas>
		<script>
			var socket = io.connect('http://127.0.0.1:8000');
			canvas = document.getElementById("canvas");
			context = canvas.getContext("2d");

			socket.emit('packer_view');

			socket.on('packerSetBound', function(width, height)
			{
				canvas.width = width;
				canvas.height = height;

				//clearRect is not working. Transparency is stacking.
				context.clearRect(0, 0, canvas.width, canvas.height);
			});

			socket.on('packerDrawRectangle', function(x, y, width, height)
			{
				context.fillStyle = "#00ff00";
				context.globalAlpha = 0.5;
				context.strokeStyle = "#ff0000";
				context.rect(x, y, width, height);
				context.fill();
				context.stroke();
				context.globalAlpha = 1;
			});

			socket.on('packerDrawRectangleFree', function(x, y, width, height)
			{
				context.strokeStyle = "black";
				context.rect(x, y, width, height);
				context.stroke();
			});
		</script>
	</body>
</html>